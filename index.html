<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BTC Up/Down — Hybrid</title>
<meta name="theme-color" content="#0b0f1a"/>
<link rel="manifest" href="manifest.json"/>
<style>
  :root{
    --bg:#0b0f1a; --card:#121826; --ink:#e7eaf0; --muted:#97a1b3;
    --pos:#22c55e; --neg:#ef4444; --accent:#3b82f6;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px system-ui,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial}
  .wrap{max-width:900px;margin:32px auto;padding:16px}
  .card{background:var(--card);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
  h1{margin:0 0 12px;font-size:22px}
  .muted{color:var(--muted)}
  button{background:var(--accent);color:#fff;border:0;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:10px}
  .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>BTC Up/Down — Hybrid <span class="muted">PWA Shell</span></h1>
      <p class="muted">هذا قالب جاهز للنشر على GitHub Pages والتثبيت على جوجل كروم للأندرويد. ضع كود التطبيق الخاص بك هنا.</p>
      <div class="row">
        <button id="installBtn" hidden>Install App</button>
        <span id="status" class="muted"></span>
      </div>
      <hr style="border-color:#182034;border-width:0 0 1px;margin:16px 0">
      <p>ضع سكربت البث الحي هنا (Binance WebSocket)، أو استبدل الملف بالكامل بملفك السابق.</p>
      <pre class="mono" id="log"></pre>
    </div>
  </div>

<script>
// --- simple demo: connect to Binance trade stream for BTCUSDT (optional) ---
try{
  const log = document.getElementById('log');
  const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@trade');
  ws.onmessage = (ev) => {
    const { p:price } = JSON.parse(ev.data);
    if (!log.dataset.first) { log.textContent = 'Live price: ' + price; log.dataset.first=1; }
  };
}catch(e){}

// --- PWA: service worker registration ---
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js').catch(()=>{});
  });
}

// --- Optional: Install prompt button ---
let deferredPrompt;
const installBtn = document.getElementById('installBtn');
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.hidden = false;
});

installBtn?.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  installBtn.hidden = true;
  deferredPrompt = null;
});
</script>
</body>
</html>
